{% extends "base.html" %}

{% block content %}
<header class="page-header">
  <h1>Combined Risk Dashboard</h1>
  <div class="header-meta">Real-time monitoring — landslide & flood risks</div>
</header>

<div class="grid">

  <!-- LANDSLIDE -->
  <div class="card">
    <h3>Landslide Risk</h3>
    <div id="landslideRisk" class="risk-box"></div>
    <canvas id="miniLS"></canvas>
  </div>

  <!-- FLOOD -->
  <div class="card">
    <h3>Flood Risk</h3>
    <div id="floodRisk" class="risk-box"></div>
    <canvas id="miniFL"></canvas>
  </div>

  <!-- COMBINED -->
  <div class="card wide">
    <h3>Combined Risk</h3>
    <div id="combinedRisk" class="risk-box large"></div>
    <canvas id="miniCombined"></canvas>
  </div>

  <!-- NOTIFICATIONS -->
  <div class="card wide">
    <h3>Notifications</h3>
    <ul id="globalNotif"></ul>
  </div>

  <!-- ML Controls -->
  <div class="card wide">
    <h3>Machine Learning Control</h3>
    <p class="subtext">Use these buttons to operate calibration and model training.</p>
    <div class="ml-controls">
      <button id="btnStartCalib" class="btn green">▶ Start Calibration</button>
      <button id="btnStopCalib" class="btn red">■ Stop Calibration</button>
      <button id="btnTrain" class="btn blue">⚙ Train Model</button>
    </div>
    <p id="mlStatusMsg" class="ml-status"></p>
  </div>

</div>
{% endblock %}

{% block scripts %}
  <script src="{{ url_for('static', filename='js/combined.js') }}" defer></script>
{% endblock %}

